{% extends 'base.twig' %}

{% block title %}Liste des Offres{% endblock %}

{% block content %}
<div class="offers-container">
    <h1>Liste des Offres</h1>
    
    <div class="offers-list">
        {% for offer in offers %}
        <div class="offer-card">
            <h2>{{ offer.title }}</h2>
            <p class="company">{{ offer.company }}</p>
            <p class="description">{{ offer.description|slice(0, 150) }}...</p>
            
            <div class="skills">
                {% for skill in offer.skills|split(',') %}
                <span class="skill-tag">{{ skill }}</span>
                {% endfor %}
            </div>
            
            <div class="offer-details">
                <span>Salaire: {{ offer.salary }} €</span>
                <span>Début: {{ offer.start_date|date('d/m/Y') }}</span>
                <span>Durée: {{ offer.duration }} jours</span>
                <span>Candidats: {{ offer.applicants }}</span>
            </div>
            
            <a href="{{ path('offer', {'offer_id': offer.offer_id}) }}" class="view-button">Voir l'offre</a>
        </div>
        {% else %}
        <p>Aucune offre disponible pour le moment.</p>
        {% endfor %}
    </div>
    
    {% if total_pages > 1 %}
    <div class="pagination">
        {% if current_page > 1 %}
            <a href="{{ path('offers', {'page': current_page - 1}) }}" class="page-link">&laquo; Précédent</a>
        {% endif %}
        
        {% for i in 1..total_pages %}
            {% if i == current_page %}
                <span class="current-page">{{ i }}</span>
            {% else %}
                <a href="{{ path('offers', {'page': i}) }}" class="page-link">{{ i }}</a>
            {% endif %}
        {% endfor %}
        
        {% if current_page < total_pages %}
            <a href="{{ path('offers', {'page': current_page + 1}) }}" class="page-link">Suivant &raquo;</a>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ asset('/css/offers.css') }}" />
{% endblock %}